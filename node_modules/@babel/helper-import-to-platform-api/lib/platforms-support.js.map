{"version":3,"names":["_helperCompilationTargets","require","_excluded","_objectWithoutPropertiesLoose","r","e","t","n","hasOwnProperty","call","indexOf","isEmpty","obj","Object","keys","length","isRequiredOptions","compatData","webIMR","chrome","edge","firefox","opera","safari","opera_mobile","ios","samsung","deno","nodeIMR","node","nodeFSP","SUPPORT_CACHE","WeakMap","getSupport","targets","has","get","nodeTarget","webTargets","emptyNodeTarget","emptyWebTargets","needsNodeSupport","needsWebSupport","webSupportsIMR","isRequired","nodeSupportsIMR","nodeSupportsFsPromises","result","set"],"sources":["../src/platforms-support.ts"],"sourcesContent":["import { isRequired, type Targets } from \"@babel/helper-compilation-targets\";\n\nfunction isEmpty(obj: object) {\n  return Object.keys(obj).length === 0;\n}\n\nconst isRequiredOptions = {\n  compatData: {\n    // `import.meta.resolve` compat data.\n    // Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import.meta/resolve#browser_compatibility\n    // Once Node.js implements `fetch` of local files, we can re-use the web implementation for it\n    // similarly to how we do for Deno.\n    webIMR: {\n      chrome: \"105.0.0\",\n      edge: \"105.0.0\",\n      firefox: \"106.0.0\",\n      opera: \"91.0.0\",\n      safari: \"16.4.0\",\n      opera_mobile: \"72.0.0\",\n      ios: \"16.4.0\",\n      samsung: \"20.0\",\n      deno: \"1.24.0\",\n    },\n    nodeIMR: {\n      node: \"20.6.0\",\n    },\n    // Node.js require(\"fs\").promises compat data.\n    nodeFSP: {\n      node: \"10.0.0\",\n    },\n  },\n};\n\ninterface Support {\n  needsNodeSupport: boolean;\n  needsWebSupport: boolean;\n  nodeSupportsIMR: boolean;\n  webSupportsIMR: boolean;\n  nodeSupportsFsPromises: boolean;\n}\n\nconst SUPPORT_CACHE = new WeakMap<Targets, Support>();\nexport default function getSupport(targets: Targets): Support {\n  if (SUPPORT_CACHE.has(targets)) return SUPPORT_CACHE.get(targets);\n\n  const { node: nodeTarget, ...webTargets } = targets;\n  const emptyNodeTarget = nodeTarget == null;\n  const emptyWebTargets = isEmpty(webTargets);\n  const needsNodeSupport = !emptyNodeTarget || emptyWebTargets;\n  const needsWebSupport = !emptyWebTargets || emptyNodeTarget;\n\n  const webSupportsIMR =\n    !emptyWebTargets && !isRequired(\"webIMR\", webTargets, isRequiredOptions);\n  const nodeSupportsIMR =\n    !emptyNodeTarget &&\n    !isRequired(\"nodeIMR\", { node: nodeTarget }, isRequiredOptions);\n  const nodeSupportsFsPromises =\n    !emptyNodeTarget &&\n    !isRequired(\"nodeFSP\", { node: nodeTarget }, isRequiredOptions);\n\n  const result = {\n    needsNodeSupport,\n    needsWebSupport,\n    nodeSupportsIMR,\n    webSupportsIMR,\n    nodeSupportsFsPromises,\n  };\n  SUPPORT_CACHE.set(targets, result);\n  return result;\n}\n"],"mappings":";;;;;;AAAA,IAAAA,yBAAA,GAAAC,OAAA;AAA6E,MAAAC,SAAA;AAAA,SAAAC,8BAAAC,CAAA,EAAAC,CAAA,gBAAAD,CAAA,iBAAAE,CAAA,gBAAAC,CAAA,IAAAH,CAAA,SAAAI,cAAA,CAAAC,IAAA,CAAAL,CAAA,EAAAG,CAAA,gBAAAF,CAAA,CAAAK,OAAA,CAAAH,CAAA,aAAAD,CAAA,CAAAC,CAAA,IAAAH,CAAA,CAAAG,CAAA,YAAAD,CAAA;AAE7E,SAASK,OAAOA,CAACC,GAAW,EAAE;EAC5B,OAAOC,MAAM,CAACC,IAAI,CAACF,GAAG,CAAC,CAACG,MAAM,KAAK,CAAC;AACtC;AAEA,MAAMC,iBAAiB,GAAG;EACxBC,UAAU,EAAE;IAKVC,MAAM,EAAE;MACNC,MAAM,EAAE,SAAS;MACjBC,IAAI,EAAE,SAAS;MACfC,OAAO,EAAE,SAAS;MAClBC,KAAK,EAAE,QAAQ;MACfC,MAAM,EAAE,QAAQ;MAChBC,YAAY,EAAE,QAAQ;MACtBC,GAAG,EAAE,QAAQ;MACbC,OAAO,EAAE,MAAM;MACfC,IAAI,EAAE;IACR,CAAC;IACDC,OAAO,EAAE;MACPC,IAAI,EAAE;IACR,CAAC;IAEDC,OAAO,EAAE;MACPD,IAAI,EAAE;IACR;EACF;AACF,CAAC;AAUD,MAAME,aAAa,GAAG,IAAIC,OAAO,CAAmB,CAAC;AACtC,SAASC,UAAUA,CAACC,OAAgB,EAAW;EAC5D,IAAIH,aAAa,CAACI,GAAG,CAACD,OAAO,CAAC,EAAE,OAAOH,aAAa,CAACK,GAAG,CAACF,OAAO,CAAC;EAEjE,MAAM;MAAEL,IAAI,EAAEQ;IAA0B,CAAC,GAAGH,OAAO;IAAtBI,UAAU,GAAAnC,6BAAA,CAAK+B,OAAO,EAAAhC,SAAA;EACnD,MAAMqC,eAAe,GAAGF,UAAU,IAAI,IAAI;EAC1C,MAAMG,eAAe,GAAG7B,OAAO,CAAC2B,UAAU,CAAC;EAC3C,MAAMG,gBAAgB,GAAG,CAACF,eAAe,IAAIC,eAAe;EAC5D,MAAME,eAAe,GAAG,CAACF,eAAe,IAAID,eAAe;EAE3D,MAAMI,cAAc,GAClB,CAACH,eAAe,IAAI,CAAC,IAAAI,oCAAU,EAAC,QAAQ,EAAEN,UAAU,EAAEtB,iBAAiB,CAAC;EAC1E,MAAM6B,eAAe,GACnB,CAACN,eAAe,IAChB,CAAC,IAAAK,oCAAU,EAAC,SAAS,EAAE;IAAEf,IAAI,EAAEQ;EAAW,CAAC,EAAErB,iBAAiB,CAAC;EACjE,MAAM8B,sBAAsB,GAC1B,CAACP,eAAe,IAChB,CAAC,IAAAK,oCAAU,EAAC,SAAS,EAAE;IAAEf,IAAI,EAAEQ;EAAW,CAAC,EAAErB,iBAAiB,CAAC;EAEjE,MAAM+B,MAAM,GAAG;IACbN,gBAAgB;IAChBC,eAAe;IACfG,eAAe;IACfF,cAAc;IACdG;EACF,CAAC;EACDf,aAAa,CAACiB,GAAG,CAACd,OAAO,EAAEa,MAAM,CAAC;EAClC,OAAOA,MAAM;AACf","ignoreList":[]}